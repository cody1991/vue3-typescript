language: node_js
node_js:
  - 'node'

cache: npm

script: npm run build

after_success:
  - cd dist
  - git init
  - git add .
  - git commit -m "自动更新pages"
  - git push -f git@github.com:cody1991/vue3-typescript.git master:gh-pages

deploy:
  provider: pages
  skip_cleanup: true
  github_token: $GITHUB_TOKEN
  local_dir: dist
  on:
    tags: true
